# 📘 LaTeX + Circuitikz + VS Code 一站式新手教程

本教程面向刚开始学习 LaTeX 的新手，带你从零入门：
1. 快速掌握 **LaTeX 基础语法与结构**；
2. 学会使用 **Circuitikz 绘制电路图**；
3. 在 **VS Code 中配置自动 XeLaTeX 编译环境**。

---

## 🧭 第一章：LaTeX 基础入门

### 1️⃣ LaTeX 是什么
LaTeX 是一种用于排版学术论文、数学公式和技术文档的系统。相比 Word，它更注重结构化排版和数学公式的专业呈现。

---

### 2️⃣ 最小工作示例（MWE）

创建一个文件 `main.tex`：

```latex
\documentclass{article}   % 文档类型
\usepackage{ctex}         % 中文支持
\usepackage{amsmath}      % 数学环境
\usepackage{graphicx}     % 图片支持

\begin{document}

\section{你好，LaTeX！}
这是我的第一份 LaTeX 文档。

\subsection{数学公式}
行内公式示例：$E = mc^2$  
独立公式示例：
\[
\int_0^\infty e^{-x^2} \, dx = \frac{\sqrt{\pi}}{2}
\]

\subsection{插入图片}
\includegraphics[width=0.5\textwidth]{example.png}

\end{document}
```

保存后编译，会生成一个整洁的 PDF。

---

### 3️⃣ 基本概念
| 名称 | 说明 |
|------|------|
| `\documentclass{}` | 定义文档类型（如 article, report, beamer） |
| `\usepackage{}` | 导入宏包，扩展功能 |
| `\begin{}` / `\end{}` | 环境结构（如 document, equation, itemize） |
| `$...$` / `\[...\]` | 数学模式（行内 / 独立公式） |

---

### 4️⃣ 推荐新手先掌握的宏包
| 宏包 | 功能 |
|------|------|
| `ctex` | 中文支持 |
| `amsmath` | 高级数学公式 |
| `graphicx` | 图片插入 |
| `geometry` | 页面布局 |
| `circuitikz` | 绘制电路图 |

---

## ⚡ 第二章：Circuitikz 电路图入门

Circuitikz 是专门为 LaTeX 设计的电路绘图宏包，适合画逻辑门、电源、放大器、电阻、电容等。

### 1️⃣ 引入宏包
在导言区添加：
```latex
\usepackage{circuitikz}
```

---

### 2️⃣ 绘制基本电路元件

#### 示例 1：简单电阻电路
```latex
\begin{circuitikz}
  \draw (0,0) to[R, l=$R$] (2,0);
\end{circuitikz}
```

#### 示例 2：带电源和灯泡的简单电路
```latex
\begin{circuitikz}[american]
  \draw
  (0,0) to[battery, l_=$V_1$] (0,2)
  to[R, l=$R_1$] (2,2)
  to[lamp, l=$L$] (2,0)
  -- (0,0);
\end{circuitikz}
```

---

### 3️⃣ 绘制逻辑门（如 NAND / NOR）

```latex
\begin{circuitikz}[american]
  \draw
  (0,0) node[nor port] (nor1) {}
  (nor1.in 1) node[left] {$A$}
  (nor1.in 2) node[left] {$B$}
  (nor1.out) node[right] {$Y = A + B$};
\end{circuitikz}
```

---

### 4️⃣ 在逻辑门下方添加标签（例如 “NAND”）
要在门下方 0.5 单位显示标签，可使用 `label` + `shift`：

```latex
\begin{circuitikz}
  \draw
  (0,0) node[nand port] (nand1) {}
  (nand1) node[below=0.5] {NAND}
  (nand1.in 1) node[left] {$A$}
  (nand1.in 2) node[left] {$B$}
  (nand1.out) node[right] {$Y = \overline{A \cdot B}$};
\end{circuitikz}
```

---

### 5️⃣ 常见元件参考
| 元件 | 语法示例 |
|------|----------|
| 电阻 | `to[R, l=$R$]` |
| 电容 | `to[C, l=$C$]` |
| 电感 | `to[L, l=$L$]` |
| 电源 | `to[battery, l_=$V$]` |
| 接地 | `node[ground]` |
| 灯泡 | `to[lamp, l=$L$]` |
| 二极管 | `to[diode, l=$D$]` |
| 逻辑门 | `node[nand port]`, `node[nor port]`, `node[and port]` |

更多元件可在官方手册中查阅：  
👉 [CTAN Circuitikz 文档](https://ctan.org/pkg/circuitikz)

---

## 💻 第三章：在 VS Code 中配置自动编译环境

我们希望 VS Code：
- 自动使用 **XeLaTeX** 编译；
- 保存时自动运行；
- 输出文件保存在 `out/` 文件夹中；
- 自动预览 PDF。

---

### 1️⃣ 前置条件
- 已安装 **MiKTeX / TeX Live / MacTeX**
- 已安装 VS Code
- 安装扩展：
  - `LaTeX Workshop`
  - `LaTeX Utilities`（可选）

---

### 2️⃣ 项目结构建议
```
MyLaTeXProject/
├── .vscode/
│   └── settings.json
├── figures/
│   └── diagram.png
├── main.tex
└── out/
```

---

### 3️⃣ VS Code 配置文件

在 `.vscode/settings.json` 中写入：

```json
{
  "latex-workshop.latex.autoBuild.run": "onSave",
  "latex-workshop.view.pdf.viewer": "tab",
  "latex-workshop.latex.outDir": "./out",

  "latex-workshop.latex.recipes": [
    { "name": "xelatex", "tools": ["xelatex"] },
    { "name": "xelatex -> bibtex -> xelatex*2", "tools": ["xelatex", "bibtex", "xelatex", "xelatex"] }
  ],

  "latex-workshop.latex.tools": [
    {
      "name": "xelatex",
      "command": "xelatex",
      "args": [
        "-synctex=1",
        "-interaction=nonstopmode",
        "-file-line-error",
        "-output-directory=./out",
        "%DOCFILE%"
      ]
    },
    {
      "name": "bibtex",
      "command": "bibtex",
      "args": ["./out/%DOCFILE%"]
    }
  ],

  "latex-workshop.latex.recipe.default": "lastUsed",
  "latex-workshop.synctex.afterBuild.enabled": true,
  "latex-workshop.message.error.show": true
}
```

---

### 4️⃣ 测试自动编译

创建一个最小文档：

```latex
\documentclass{article}
\usepackage{ctex}
\usepackage{circuitikz}
\begin{document}
测试 XeLaTeX 自动编译。

\begin{circuitikz}
  \draw (0,0) to[battery, l_=$V$] (0,2)
        to[R, l=$R$] (2,2)
        to[lamp, l=$L$] (2,0)
        -- (0,0);
\end{circuitikz}
\end{document}
```

保存后，VS Code 底部会显示 “Building with recipe: xelatex”，  
并生成 `out/main.pdf`，自动在右侧标签页打开。

---

## 🌱 第四章：进阶与提高

| 主题 | 建议方向 |
|------|-----------|
| LaTeX 数学公式 | 学习 `amsmath`、`mathtools` |
| 文献引用 | 学习 `biblatex` + `.bib` 文件 |
| 模板使用 | 了解 IEEEtran、beamer、ctexbook 等模板 |
| 电路绘图进阶 | 阅读 Circuitikz 官方手册，掌握 `anchors`、`labels`、`paths` |
| 自动化 | 使用 `latexmk` 或 `latexmkrc` 配置多步编译 |

---

## 🏁 结语

通过本教程，你已经掌握了：
- LaTeX 基础结构与常用语法；
- 使用 Circuitikz 绘制逻辑电路与电气元件；
- 在 VS Code 中配置 XeLaTeX 自动编译环境。

这是一个完整、可复现、可扩展的工作流。  
只需保存 `.tex` 文件，VS Code 就能自动生成整洁的 PDF。

🎉 恭喜，你已经踏入了现代 LaTeX 工程化的第一步！
